---
import TailwindPlayground from './TailwindPlayground';

interface Props {
  baseDir: string;
  id: string;
  height?: number;
}

const { baseDir, id, height } = Astro.props;

const fileImports = import.meta.glob('/src/content/blog/**/*.{html,css,js}', {
  query: '?raw',
  import: 'default',
  eager: true,
});

const htmlPath = `/src/content/blog/${baseDir}/${id}.html`;
const cssPath = `/src/content/blog/${baseDir}/${id}.css`;
const jsPath = `/src/content/blog/${baseDir}/${id}.js`;

const html = fileImports[htmlPath];
const css = fileImports[cssPath];
const js = fileImports[jsPath];

if (typeof html !== 'string') {
  throw new Error(`Missing HTML example file: ${htmlPath}`);
}
if (cssPath in fileImports && typeof css !== 'string') {
  throw new Error(`Invalid CSS example file: ${cssPath}`);
}
if (jsPath in fileImports && typeof js !== 'string') {
  throw new Error(`Invalid JS example file: ${jsPath}`);
}
---

<TailwindPlayground client:load html={html} css={typeof css === 'string' ? css : undefined} js={typeof js === 'string' ? js : undefined} height={height} />
